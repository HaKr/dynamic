<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Dynamic App</title>
		<link rel="stylesheet" media="all" href="dynamic-app.css">
		<script src="js/dynamic.js"></script>
	</head>

	<body class='dynamic-person'>

		<div class=meta>
			<label>Templates:    	{{debug.template_count}}.</label>
			<label>Placeholders:    {{debug.placeholder_count}}.</label>
			<label>Instances:    	{{debug.instance_count}}.</label>
			<label>Observers:     	{{debug.observer_count}}.</label>
		</div>


		<p class=selection>
			<label>Actions:
				<button id=set-button>Simulate Get Person list call</button>
			</label>
			<button id=show-button>Show person in console</button>

			<label>Show info for:
				<select id=person-select name=persons.$selected class="dynamic-template person-select" data-dynamic-template-for="persons">
					<option disabled>Choose a person</option>

					<option value={{.$reference}} class="dynamic-template person-select-option" data-dynamic-template-for-each="persons">
						{{.first-name}} {{.last-name}}
					</option>

				</select>
			</label>
		</p>

		<form id=build_input method=post action=/api/build-input class="dynamic-template person-record-input" data-dynamic-template-for=persons.@>
			<label>First name: 
				<input name=.first-name>
			</label>
			<label>Last name: 
			<input name=.last-name></label>
			<label>Id:
				<input name=.salary type=number max=10000 step=1 class=currency>
		</form>

		<ul class="dynamic-template person-list" data-dynamic-template-for="persons">
			<li class="dynamic-template person-list-item" data-dynamic-template-for-each="persons">
				<span class=person-id>{{.id}}</span>{{.first-name}} {{.last-name}} ({{ .monthly_salary= .salary * 12 * 1.08 }})
			</li>
			<li><label>Total: TS={{persons_total= Sum( persons.*.salary, 3)}} TM={{persons_total_monthly= Sum( persons.*.monthly_salary, 3)}} TMC={{persons_total_monthly2= persons_total * 12 * 1.08  }}</label>
		</ul>



	</body>
</html>